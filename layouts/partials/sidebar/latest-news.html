{{/* WORKAROUND: Extract language from URL since .Site.Language.Lang returns default lang */}}
{{ $url_parts := split .RelPermalink "/" }}
{{ $currentLang := index $url_parts 1 }}
{{ if not $currentLang }}{{ $currentLang = .Site.Language.Lang }}{{ end }}

{{/* Get articles from current language's news section - using AllPages workaround */}}
{{ $lang_news_path := printf "/%s/news/" $currentLang }}
{{ $news_section := index (where .Site.AllPages "RelPermalink" $lang_news_path) 0 }}
{{ $all_pages := cond (ne $news_section nil) ($news_section.RegularPages | default $news_section.Pages) (slice) }}
{{ $latest := first 10 ($all_pages.ByDate.Reverse | default (slice)) }}

<div class="widget widget-latest-news">
  <h3 class="widget-title">{{ i18n "latest_news" | default "Ultimele È˜tiri" }}</h3>
  <ul class="news-list">
    {{ range $latest }}
      <li class="news-item">
        <a href="{{ .RelPermalink }}" class="news-item-link">
          <span class="news-item-title">{{ .Title }}</span>
        </a>
        <time class="news-item-time" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ partial "format-date.html" (dict "ctx" . "date" .Date "format" "short") }}</time>
      </li>
    {{ end }}
  </ul>
</div>
