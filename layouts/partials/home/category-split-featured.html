{{/*
  Category Split Featured Layout

  LEFT: One featured article with image
  RIGHT: Configurable text list of remaining articles

  Parameters:
  - context: The page context (.)
  - category: Category slug
  - limit: Number of articles to display (1 featured + rest in list)
*/}}

{{ $context := .context }}
{{ $category_slug := .category }}
{{ $limit := .limit | default 5 }}

{{/* Get current language */}}
{{ $currentLang := $context.Language.Lang }}

{{/* Get category data */}}
{{ $category_list := where $context.Site.Data.categories "slug" $category_slug }}
{{ $category_data := index $category_list 0 }}
{{ $category_name := index $category_data $currentLang | default $category_data.ro }}

{{/* Get articles from language-specific section */}}
{{ $lang_news_path := printf "/%s/news" $currentLang }}
{{ $news_section := $context.Site.GetPage $lang_news_path }}
{{ $all_lang_pages := $news_section.Pages }}

{{/* Filter by category */}}
{{ $pages := where $all_lang_pages ".Params.categories" "intersect" (slice $category_slug) }}
{{ $pages = first $limit $pages }}

{{ if gt (len $pages) 0 }}
<section class="category-section category-split-featured-section">
  <header class="category-header">
    <h2 class="category-title">
      <a href="/{{ $currentLang }}/categories/{{ $category_slug }}/">{{ $category_name }}</a>
    </h2>
  </header>

  <div class="category-split-container">
    {{/* LEFT: Featured article with image */}}
    {{ with index $pages 0 }}
      <div class="split-featured">
        {{ partial "home/category-card.html" (dict "page" . "card_class" "card-split-featured") }}
      </div>
    {{ end }}

    {{/* RIGHT: Text list of remaining articles */}}
    {{ if gt (len $pages) 1 }}
      <div class="split-list">
        {{ range after 1 $pages }}
          {{ partial "home/category-card.html" (dict "page" . "card_class" "card-split-list-item") }}
        {{ end }}
      </div>
    {{ end }}
  </div>
</section>
{{ end }}
