{{/* Hero story: prefers featured=true then latest. */}}
{{ $sec := .GetPage (printf "/%s/news" .Site.Language.Lang) }}
{{ $pages := cond (ne $sec nil) (sort $sec.RegularPages "Date" "desc") (slice) }}
{{ $featured := where $pages ".Params.featured" true }}
{{ $hero := cond (gt (len $featured) 0) (index $featured 0) (cond (gt (len $pages) 0) (index $pages 0) nil) }}
{{ if $hero }}
  <article class="card hero">
    {{ $img := or $hero.Params.cover (cond (in $hero.Params.tags "politic") "/img/placeholders/politic.svg" "/img/placeholders/local.svg") }}
    {{ with $img }}
      {{ $res := $hero.Resources.GetMatch . | default (resources.Get .) }}
      {{ if and $res (ne $res.MediaType.SubType "svg") }}
        {{ $lg := $res.Fit "1600x900 webp" | resources.Fingerprint }}
        {{ $md := $res.Fit "1200x675 webp" | resources.Fingerprint }}
        {{ $sm := $res.Fit "800x450 webp"  | resources.Fingerprint }}
        <a href="{{ $hero.RelPermalink }}" class="hero-media">
          <img src="{{ $lg.RelPermalink }}" srcset="{{ $sm.RelPermalink }} 800w, {{ $md.RelPermalink }} 1200w, {{ $lg.RelPermalink }} 1600w" sizes="(max-width: 50rem) 100vw, 50vw" width="1600" height="900" alt="" loading="eager" fetchpriority="high" />
        </a>
      {{ else }}
        {{ $static := . | absURL }}
        <a href="{{ $hero.RelPermalink }}" class="hero-media">
          <img src="{{ $static }}" width="1600" height="900" alt="" loading="eager" fetchpriority="high" />
        </a>
      {{ end }}
    {{ end }}
    <div class="hero-text">
      <h2><a href="{{ $hero.RelPermalink }}">{{ $hero.Title }}</a></h2>
      <p class="meta">{{ $hero.Date.Format "2006-01-02" }} Â· {{ delimit ($hero.Params.authors | default (slice)) ", " }}</p>
      {{ with $hero.Summary }}<p>{{ . | plainify }}</p>{{ end }}
    </div>
  </article>
{{ end }}
