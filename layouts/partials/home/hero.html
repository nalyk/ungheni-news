{{/* Hero story: prefers local category, then featured, then latest. */}}
{{ $sec := .GetPage (printf "/%s/news" .Site.Language.Lang) }}
{{ $pages := cond (ne $sec nil) (sort $sec.RegularPages "Date" "desc") (slice) }}

{{/* Priority 1: Most recent local article */}}
{{ $localPages := where $pages "Params.categories" "intersect" (slice "local") }}
{{ $hero := cond (gt (len $localPages) 0) (index $localPages 0) nil }}

{{/* Priority 2: Featured articles if no local */}}
{{ if not $hero }}
  {{ $featured := where $pages ".Params.featured" true }}
  {{ $hero = cond (gt (len $featured) 0) (index $featured 0) nil }}
{{ end }}

{{/* Priority 3: Latest article as fallback */}}
{{ if not $hero }}
  {{ $hero = cond (gt (len $pages) 0) (index $pages 0) nil }}
{{ end }}
{{ if $hero }}
  <article class="hero-card" itemscope itemtype="https://schema.org/Article">
    <div class="hero-container">
      {{ $img := or $hero.Params.cover (cond (in $hero.Params.tags "politic") "img/placeholders/politic.svg" "img/placeholders/local.svg") }}
      {{ with $img }}
        <div class="hero-media">
          <a href="{{ $hero.RelPermalink }}" class="hero-image-link" aria-label="CiteÈ™te articolul principal">
            {{ partial "media/image.html" (dict 
              "page" $hero 
              "src" . 
              "alt" $hero.Title 
              "widths" (slice 800 1200 1600) 
              "sizes" "(max-width: 48rem) 100vw, (max-width: 80rem) 60vw, 50vw" 
              "class" "hero-image" 
              "loading" "eager" 
              "fetchpriority" "high" 
              "decoding" "async" 
            ) }}
          </a>
        </div>
      {{ end }}
      
      <div class="hero-content">
        <div class="hero-meta">
          {{ partial "pills.html" (dict "category" (index ($hero.Params.categories | default slice) 0) "format" (index ($hero.Params.formats | default slice) 0) "size" "large") }}
          <time datetime="{{ $hero.Date.Format "2006-01-02T15:04:05Z07:00" }}" 
                class="hero-date" 
                itemprop="datePublished">
            {{ $hero.Date.Format "2 January 2006" }}
          </time>
        </div>
        
        <h1 class="hero-title" itemprop="headline">
          <a href="{{ $hero.RelPermalink }}" class="hero-title-link">{{ $hero.Title }}</a>
        </h1>
        
        {{ with $hero.Summary }}
          <p class="hero-summary" itemprop="description">{{ . | plainify }}</p>
        {{ end }}
        
        {{ with $hero.Params.authors }}
          <div class="hero-byline">
            <span class="hero-authors" itemprop="author">{{ i18n "by" }} {{ delimit . ", " }}</span>
          </div>
        {{ end }}
      </div>
    </div>
  </article>
{{ end }}
